!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var Controllency=require("../dist/src/Controllency");window.Controllency=window.Controllency||Controllency.Controllency},{"../dist/src/Controllency":2}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const events_1=require("events");class Controllency extends events_1.EventEmitter{constructor(options){if(super(),"number"==typeof options)options={maxConcurrency:options};else if(void 0===options)options={maxConcurrency:1};else{if("object"!=typeof options)throw new Error('"options" must be an object or a number');options.maxConcurrency=options.maxConcurrency||1}this.setMaxConcurrency(options.maxConcurrency),this.buffer=[],this.status="idle",this.currentQuantityProcessing=0}setMaxConcurrency(maxConcurrency){if("number"!=typeof maxConcurrency||Math.trunc(maxConcurrency)!==maxConcurrency||maxConcurrency<=0)throw new Error("maxConcurrency must be an integer");this.maxConcurrency=maxConcurrency}getMaxConcurrency(){return this.maxConcurrency}getBufferSize(){return this.buffer.length}getStatus(){return this.status}pause(){this.status="paused"}resume(){this.status=0===this.currentQuantityProcessing?"idle":"processing",this.proceed()}getCurrentQuantityProcessing(){return this.currentQuantityProcessing}push(item){if("function"==typeof item&&(item={fn:item}),"object"!=typeof item)throw new Error('"item" must be an object or a function');if(Array.isArray(item.params)||(item.params=void 0===item.params?[]:[item.params]),"function"!=typeof item.fn)throw new Error('"fn" must be a function');const bufferedItem={bufferedDate:new Date,fn:item.fn,params:item.params,processing:!0,promise:null,thisObj:item.thisObj};this.buffer.push(bufferedItem),this.proceed()}proceed(){if(this.maxConcurrency===this.currentQuantityProcessing||"paused"===this.status)return;const quantityToStart=Math.min(this.maxConcurrency-this.currentQuantityProcessing,this.buffer.length-this.currentQuantityProcessing),itemsToStart=this.buffer.slice(this.currentQuantityProcessing,this.currentQuantityProcessing+quantityToStart);this.currentQuantityProcessing+=quantityToStart,this.status=0===this.currentQuantityProcessing?"idle":"processing",itemsToStart.forEach(this.startItem.bind(this))}startItem(bufferedItem){bufferedItem.promise=Promise.resolve(bufferedItem.fn.apply(bufferedItem.thisObj,bufferedItem.params)),bufferedItem.promise.then(this.onPromiseResolved.bind(this,bufferedItem),this.onPromiseRejected.bind(this,bufferedItem))}onPromiseResolved(bufferedItem,result){this.currentQuantityProcessing-=1,this.buffer.splice(this.buffer.indexOf(bufferedItem),1),0===this.currentQuantityProcessing&&(this.status="idle"),this.proceed(),this.emit("resolved",result,bufferedItem)}onPromiseRejected(bufferedItem,reason){this.currentQuantityProcessing-=1,this.buffer.splice(this.buffer.indexOf(bufferedItem),1),0===this.currentQuantityProcessing&&(this.status="idle"),this.proceed(),this.emit("rejected",reason,bufferedItem)}}exports.Controllency=Controllency},{events:3}],3:[function(require,module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((er=arguments[1])instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),len=(listeners=handler.slice()).length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){return this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},{}]},{},[1]);